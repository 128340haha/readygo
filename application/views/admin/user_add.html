<script language="javascript" type="text/javascript" src="<?= base_url(); ?>assets/public/js/jquery.validate.min.js"></script>
<script type="text/javascript" >
$(function() {
	$("#form1").validate({
		rules: {
			username: {
				required: true,
    			minlength:4,
				maxlength:30,
				remote:{
					url: "<?= site_url(array('user','reg','new_user')); ?>",     //后台处理程序
					type: "post",              									 //数据发送方式
					dataType: "json"						 //接受数据格式   
				}
			},
   			password: {
				required: true,
    			minlength:6,
				maxlength:30
			},
   			ckpwd: {
    			required: true,
    			equalTo: "input[name=password]"
   			}
  		},
        messages: {
			username: {
				required: '用户名不能为空',
    			minlength: "用户名不能小于4位",
				maxlength: "用户名不能大于30位",
				remote: "用户名已存在"
			},
   			password: {
				required: "密码不能为空",
				minlength: "密码不能小于6位",
				maxlength: "密码不能大于30位"
   			},
   			ckpwd: {
				required: "确认密码不能为空",
				equalTo: "两次输入密码不一致不一致",
   			},
		}
    });
});
</script>
<div id="main-content">
    <!-- End .clear -->
    <div class="content-box">
      <!-- Start Content Box -->
      <div class="content-box-header">
        <h3>添加用户</h3>
        <div class="clear"></div>
      </div>
      <!-- End .content-box-header -->
      <div class="content-box-content">
        <div class="tab-content default-tab" id="tab1">
            <form name="form1" id="form1" method="post" action="<?= base_url().'admin/user/new_user' ?>" >
            	<p>
                  <label>用户名</label>
                  <input class="text-input small-input" type="text" name="username" value="<? echo set_value('username') ?>" />
                  <span class="input-notification"><? echo form_error('username'); ?></span>
                </p>
                <p>
                  <label>新密码</label>
                  <input class="text-input small-input" type="password" name="password" value="<? echo set_value('password') ?>" />
                  <span class="input-notification"><? echo form_error('password'); ?></span>
                </p>
                <p>
                  <label>密码确认</label>
                  <input class="text-input small-input" type="password" name="ckpwd" value="<? echo set_value('ckpwd') ?>" />
                  <span class="input-notification"><? echo form_error('ckpwd'); ?></span>
                </p>
                <br>
                <input type="hidden" id="from_url" name="from_url" value="<? if( empty( $from_url ) ){ echo ''; }else{ echo $from_url; } ?>"  />
                <input class="button" type="submit" value="提交" />
                <input class="button" type="button" onClick="javascript:history.go(-1)" value="返回" />
            </form>
        </div>
      </div>
    </div>
</div>
